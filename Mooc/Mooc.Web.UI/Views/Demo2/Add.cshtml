@model Mooc.DataAccess.Models.Entities.User
@{
    ViewBag.Title = "Add";
}


<div class="form-horizontal">
    <div class="form-group">
        <label for="firstname" class="col-sm-2 control-label">用户名</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="UserName"
                   placeholder="请输入用户名" maxlength="50">
        </div>
    </div>
    <div class="form-group">
        <label for="lastname" class="col-sm-2 control-label">密码</label>
        <div class="col-sm-10">
            <input type="password" class="form-control" id="PassWord"
                   placeholder="请输入密码">
        </div>
    </div>

    <div class="form-group">
        <label for="lastname" class="col-sm-2 control-label">用户类型</label>
        <div class="col-sm-10">

            @Html.DropDownListFor(m => m.RoleType, ViewData["RoleType"] as List<SelectListItem>, "---请选择---", new { @class = "form-control", @id = "roleType" })

        </div>
    </div>

    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <button onclick="Add()" class="btn btn-default">登录</button>
        </div>
    </div>
</div>

<script>
    function Add() {
        var username = $("#UserName").val();
        if (!username) {
            alert("user can't be empty");
            return false;
        }
        var password = $("PassWord").val();
        if (!password) {
            alert("password can't be empty");
            return false;
        }
        var roleType = $("roleType").val();
        if (!roleType) {
            alert("roleType can't be empty");
            return false;
        }

        $.ajax({
            url: "@Url.Content("~/Demo2/AddUserList")",
            data: { "UserName": username, "PassWord": password, "RoleType": roleType },
            dataType: 'json', type: "POST",
            success: function (result) {
                if (result == 0 ) {
                    window.location.href="@Url.Content("~/Demo2/Index")"//return controller
                } else {
                    alert("failed add");

                }
              
            }
        });
    }
</script>